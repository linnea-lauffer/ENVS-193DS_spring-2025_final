---
title: "ENVS-193DS_spring-2025_final"
name: "Linnea Lauffer"
date: "2025-06-10"
format:
  html:
    toc: true
    toc-location: left
    toc-float: true
---

# Set Up

```{R}
#| message: false # use this to make sure messages don't show up
#| warning: false # use this to make sure warnings don't show up

# load packages 
library(tidyverse)
library(janitor)
library(here)

# read in data
sst <- read_csv(here("data", "SST_update2023.csv")) 
```

# 1. Research Writing

## a. Transparent Statistical Methods

In part 1, they used a Pearson's correlation test to determine if there is a statistically significant correlation between distance from headwater(km) and annual total nitrogen load(kg year^-1^). 

In part 2, they used a one-way ANOVA to test whether there is a statistically significant difference in average nitrogen load(kg year^-1^) among different nitrogen sources(urban land, atmospheric deposition, fertilizer wastewater treatment, and grasslands). 

## b. More Information Needed

One statistic that should be included is the F-statistic. This is the test statistic for ANOVA that is the ratio of between group variance to within group variance. The F distribution can be used to evaluate significance, and would provide more context.    

Another test that should be included is a Tukey Honestly Significant Difference (HSD) test. This would tell which groups are actually different when you compare them. ANOVA only indicates whether at least one group differs from the others. The Tukey's HSD would provide more detail. 

## c. Suggestions for rewriting

Part 1: We rejected the null hypothesis that there is no correlation between distance from headwater(km) and annual total nitrogen load(kg year^-1^) (Pearson's r=unknown, p=0.02, $\alpha$=unknown). 

Part 2: We rejected the null hypothesis that there is no difference in average nitrogen load(kg year^-1^) between sources(urban land, atmospheric deposition, fertilizer, wastewater treatment, and grasslands) (one-way ANOVA, F = unknown, degrees of freedom = unknown, p=0.02, $\alpha$ = unknown). On average, [unknown source] tend to have a higher average nitrogen load(kg year^-1^) (difference unknown, 95% CI: unknown).

# 2. Data Visualization

## a. Cleaning and Summarizing

```{R}
sst_clean <- sst |> 
  mutate( year = year(date),
          month = month(date, label = TRUE)) |> 
  filter(year %in% 2018:2023) |> 
  group_by(year, month) |> # group by year and month
  summarise(mean_monthly_sst = mean(temp)) |> 
  arrange(desc(year), match(month, month.abb)) |> 
  mutate(year = factor(year, levels = sort(unique(year))))

sst_clean |> slice_sample(n = 5)
str(sst_clean)
```


## b. Visualize the Data

```{R}
ggplot(data = sst_clean,
       aes( x = month,
            y = mean_monthly_sst,
            group = year,
            color = year)) + 
  geom_line() +
  geom_point() + 
  scale_color_brewer(name = "Year", palette = "Reds") +
  labs( x = "Month",
        y = "Mean monthly sea surface temperature (ÂºC)") +
  theme_minimal() +
  theme(panel.background = element_rect(fill = "white", color = "black"), 
        panel.grid = element_blank(),
        legend.position = c(0.1, 0.75),
        axis.ticks = element_line(color = "black"))
```


# 3. Data Analysis

## a. Response Variable

## b. Purpose of Study

## c. Difference in "Seasons"

## d. Table of Models

## e. Run the Models

## f. Check the diagnositics 

## g. Select the Best Model

## h. Visualize the Model Predictions

## i. Write a Caption for Figure 

## j. Calculate Model Predictions

## k. Interpret Results

# 4. Affective and Exploratory Visualizations

## a. Comparing Visualizations